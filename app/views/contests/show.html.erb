<h1><%= @contest.title %></h1>
<p><%= @contest.body %></p>
<p><%= @contest.prize %></p>
<p><%= @contest.created_at %></p>
<p><%= @contest.end_date %></p>
<p>Contest Deadline<%= @contest.end_date %></p>

<% if can? :edit, @contest %>
  <%= link_to "Edit", edit_contest_path(@contest) %>
<% end %>

<% if can? :destroy, @contest %>
  <%= link_to "Delete", contest_path(@contest), method: :delete, data: {confirm: "Are you sure?"} %>
<% end %>

<% if @contest.image.present? %>
  <%= image_tag @contest.image.url(:large) %>
<% end %>

<% if can? :delete, @contest %>
  <% user_entry = @contest.entry_for(current_user) %>
    <% if user_entry && user_entry.entered? %>
    <%= link_to "Un-do entry", contest_entry_path(@contest, user_entry),
                               method: :delete %>
    <% end %>

<% elsif user_entry  %>

  <% user_entry = @contest.entry_for(current_user) %>

  <% if user_entry && user_entry.entered? %>
    <%= link_to "Enter Contest", contest_entry_path(@contest, user_entry, {entry: {entered: true}}), method: :patch  %>
<% end %>

<% else %>
  <%= link_to "Enter Contest", contest_entries_path(@contest, {entry: {entered: true}}), method: :post %>
<% end %>

(<%= @contest.entry_value %>)

<a class="btn btn-primary" data-popup-open="popup-1">  <%= link_to "Enter Contest", contest_entries_path(@contest, {entry: {entered: true}}), method: :post %></a>

<div class="popup" data-popup="popup-1">
    <div class="popup-inner">
        <h2>Awesome! You've entered the competition</h2>
        <h3>Good Luck!</h3>

        <p><a data-popup-close="popup-1" href="#">Close</a></p>
        <a class="popup-close" data-popup-close="popup-1" href="#">x</a>
    </div>
</div>
